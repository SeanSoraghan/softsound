{"version":3,"file":"component---src-pages-index-tsx-1e0a7ffbcdc299780c69.js","mappings":"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","sources":["webpack://soft-sound/./src/audio/Envelope.tsx","webpack://soft-sound/./src/audio/Synth.tsx","webpack://soft-sound/./src/components/EmbeddedVideo.tsx","webpack://soft-sound/./src/pages/index.tsx"],"sourcesContent":["import { Audio } from \"three\";\r\n\r\nenum EnvType\r\n{\r\n    HOLD,\r\n    LOOPING,\r\n    ONE_SHOT,\r\n    INFINITE\r\n}\r\n\r\nenum EnvState\r\n{\r\n    ATTACK,\r\n    DECAY,\r\n    SUSTAIN,\r\n    RELEASE,\r\n    COMPLETE\r\n}\r\n\r\ninterface ADSR\r\n{\r\n    attack: number,\r\n    decay: number,\r\n    sustain: number,\r\n    release: number\r\n}\r\n\r\nclass Env\r\n{\r\n    envType: EnvType = EnvType.ONE_SHOT;\r\n    envState: EnvState = EnvState.COMPLETE;\r\n\r\n    attackTime: number = 0.1;\r\n    decayTime: number = 0.1;\r\n    sustainTime: number = 0.3;\r\n    releaseTime: number = 0.15;\r\n\r\n    sustainProportion: number = 0.8;\r\n\r\n    releaseTriggerTime: number = 0.0;\r\n    envStartTime: number = 0.0;\r\n\r\n    shouldRelease: boolean = false;\r\n    shouldStopLooping: boolean = false;\r\n\r\n    onBeginAttack: Function = () => null;\r\n    onBeginSustain: Function = () => null;\r\n    onBeginRelease: Function = () => null;\r\n    onEnvComplete: Function = () => null; // Envelope completed cycle. May loop.\r\n    onEnvStopped: Function = () => null; // Envelope completed cucle and stopped. Will not loop.\r\n    onEnvReset: Function = () => null; // Envelope was reset, possibly mid-cycle.\r\n\r\n    constructor(envType?: EnvType, adsr?: ADSR, sustainProportion?: number)\r\n    {\r\n        this.envType = envType ?? EnvType.ONE_SHOT;\r\n        this.attackTime = adsr?.attack ?? 0.1;\r\n        this.decayTime = adsr?.decay ?? 0.1;\r\n        this.sustainTime = adsr?.sustain ?? 0.3;\r\n        this.releaseTime = adsr?.release ?? 0.7;\r\n        this.sustainProportion = sustainProportion ?? 0.8;\r\n    }\r\n\r\n    reset()\r\n    {\r\n        this.shouldRelease = false;\r\n        this.shouldStopLooping = false;\r\n        this.envState = EnvState.COMPLETE;\r\n        this.releaseTriggerTime = 0.0;\r\n        this.envStartTime = 0.0;\r\n        this.onEnvReset();\r\n    }\r\n\r\n    getAttackDecayTime() { return this.attackTime + this.decayTime; }\r\n    getAttackDecaySustainTime() { return this.attackTime + this.decayTime; }\r\n    hasAttackDecayComplete(currentTime: number) { return currentTime > this.envStartTime + this.getAttackDecayTime(); }\r\n    hasAttackDecaySustainComplete(currentTime: number) { return currentTime > this.envStartTime + this.getAttackDecaySustainTime(); }\r\n    hasEnvComplete(currentTime: number) { return currentTime > this.releaseTriggerTime + this.releaseTime; }\r\n\r\n    setState(state: EnvState, time: number)\r\n    {\r\n        switch (state)\r\n        {\r\n            case EnvState.ATTACK:\r\n                this.envStartTime = time;\r\n                this.onBeginAttack();\r\n                break;\r\n            case EnvState.DECAY:\r\n                break;\r\n            case EnvState.SUSTAIN:\r\n                this.onBeginSustain();\r\n                break;\r\n            case EnvState.RELEASE:\r\n                this.releaseTriggerTime = time;\r\n                this.shouldRelease = false;\r\n                this.onBeginRelease();\r\n                break;\r\n            case EnvState.COMPLETE:\r\n                this.onEnvComplete();\r\n                break;\r\n        }\r\n        this.envState = state;\r\n    }\r\n\r\n    triggerAttackPortion(currentTime: number) { this.setState(EnvState.ATTACK, currentTime); }\r\n    triggerReleasePortion(currentTime: number) { this.setState(EnvState.RELEASE, currentTime); }\r\n\r\n    updateEnv(audioContext: AudioContext)\r\n    {\r\n        if (audioContext.state != \"running\")\r\n            return;\r\n\r\n        if (this.envType != EnvType.INFINITE)\r\n        {\r\n            if (this.envState === EnvState.ATTACK && this.hasAttackDecayComplete(audioContext.currentTime))\r\n            {\r\n                this.setState(EnvState.SUSTAIN, audioContext.currentTime);\r\n                if (this.envType === EnvType.ONE_SHOT)\r\n                    this.shouldRelease = true;\r\n            }\r\n            if (this.envState === EnvState.SUSTAIN)\r\n            {\r\n                if (this.envType === EnvType.LOOPING)\r\n                {\r\n                    this.shouldRelease = this.hasAttackDecaySustainComplete(audioContext.currentTime)\r\n                }\r\n                if (this.shouldRelease)\r\n                {\r\n                    this.setState(EnvState.RELEASE, audioContext.currentTime);\r\n                }\r\n            }\r\n            if (this.envState === EnvState.RELEASE)\r\n            {\r\n                if (this.hasEnvComplete(audioContext.currentTime))\r\n                {\r\n                    this.setState(EnvState.COMPLETE, audioContext.currentTime);\r\n                }\r\n            }\r\n            if (this.envState === EnvState.COMPLETE)\r\n            {\r\n                if (this.envType === EnvType.LOOPING && !this.shouldStopLooping)\r\n                {\r\n                    this.setState(EnvState.ATTACK, audioContext.currentTime);\r\n                }\r\n                else\r\n                {\r\n                    this.onEnvStopped();\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default Env","import { Vector2 } from \"react-three-fiber\";\r\nimport Env from \"./Envelope\";\r\n\r\nvar silence: number = 0.0001;\r\n\r\nclass Synth\r\n{\r\n    windowSize: number;\r\n    centreFrequency: number;\r\n    numOscs: number;\r\n    harmonicsMultiplier: number = 0.5;\r\n    oscs: Array<OscillatorNode> = new Array<OscillatorNode>();\r\n    oscGainNodes: Array<GainNode> = new Array<GainNode>();\r\n    envGainNodes: Array<GainNode> = new Array<GainNode>();\r\n    envelope: Env;\r\n    isPlaying: boolean = false;\r\n    currentVelocity: number = 0.0;\r\n\r\n    constructor(windowSize: number, freq: number, numOscs: number = 3)\r\n    {\r\n        this.windowSize = windowSize;\r\n        this.centreFrequency = freq;\r\n        this.numOscs = numOscs;\r\n        this.envelope = new Env();\r\n\r\n        this.envelope.onBeginAttack = (time: number) =>\r\n        {\r\n            console.log('OnBeginAttack Synth callback. Time:')\r\n            console.log(time)\r\n            this.isPlaying = true;\r\n            for (var oscIndex = 0; oscIndex < this.numOscs; oscIndex++)\r\n            {\r\n                var envGain = this.envGainNodes[oscIndex];\r\n                var g = envGain.gain;\r\n                g.cancelScheduledValues(time);\r\n                //exponentialRampToValueAtTime doesn't like 0s. It won't work if the previous value is <= 0, or if the target value is <= 0.\r\n                //Thus, we set the value to a small amount before, and fade the env to a small amount during release.\r\n                g.setValueAtTime(silence, time);\r\n                g.exponentialRampToValueAtTime(this.currentVelocity, time + this.envelope.attackTime);\r\n                var attackEndTime: number = time + this.envelope.attackTime;\r\n                g.exponentialRampToValueAtTime((this.currentVelocity * this.envelope.sustainProportion), attackEndTime + this.envelope.decayTime);\r\n            }\r\n        };\r\n\r\n        this.envelope.onBeginRelease = (time: number) =>\r\n        {\r\n            for (let oscIndex = 0; oscIndex < this.numOscs; ++oscIndex)\r\n            {\r\n                if (this.envGainNodes[oscIndex] != null)\r\n                {\r\n                    var g = this.envGainNodes[oscIndex].gain;\r\n                    // Need to explicitly set the control value first before calling exponentiaRampTo ...\r\n                    // ( http://alemangui.github.io/blog//2015/12/26/ramp-to-value.html )\r\n                    g.setValueAtTime(g.value, time);\r\n                    g.exponentialRampToValueAtTime(silence, time + this.envelope.releaseTime);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    initOscs(audioContext: AudioContext)\r\n    {\r\n        for (let oscIndex: number = 0; oscIndex < this.numOscs; ++oscIndex)\r\n        {\r\n            this.oscs.push(audioContext.createOscillator());\r\n            this.oscGainNodes.push(audioContext.createGain());\r\n            this.envGainNodes.push(audioContext.createGain());\r\n\r\n            var osc: OscillatorNode = this.oscs[oscIndex];\r\n            var oscGain: GainNode = this.oscGainNodes[oscIndex];\r\n            var envGain: GainNode = this.envGainNodes[oscIndex];\r\n            // if (synth.waveform === 0)\r\n            //     osc.type = 'sine';\r\n            // else if (synth.waveform === 1)\r\n            //     osc.type = 'square';\r\n            // else if (synth.waveform === 2)\r\n            //     osc.type = 'sawtooth';\r\n            osc.type = 'sine';\r\n\r\n            osc.frequency.value = this.centreFrequency * (1.0 + oscIndex * this.harmonicsMultiplier);\r\n            osc.connect(oscGain);\r\n            oscGain.connect(envGain);\r\n            //envGain.connect(synth.filter);\r\n            envGain.connect(audioContext.destination);\r\n            // Update osc gain\r\n            oscGain.gain.setValueAtTime(1.0, audioContext.currentTime);\r\n            if (oscIndex > 0)\r\n            {\r\n                if (this.harmonicsMultiplier === 0.0)\r\n                    oscGain.gain.setValueAtTime(0.0, audioContext.currentTime);\r\n                else\r\n                    oscGain.gain.setValueAtTime((1.0 - (oscIndex / this.numOscs)) * 0.5, audioContext.currentTime);\r\n            }\r\n            // Update env gain\r\n            envGain.gain.setValueAtTime(0.0, audioContext.currentTime);\r\n            osc.start();\r\n        }\r\n        console.log(\"Initialized synth\");\r\n    }\r\n\r\n    play(velocity: number, audioContext: AudioContext)\r\n    {\r\n        console.log(audioContext);\r\n        console.log(audioContext.state);\r\n        if (audioContext.state != \"running\")\r\n            return;\r\n\r\n        this.currentVelocity = velocity;\r\n        console.log('Synth: Play');\r\n        console.log(audioContext.currentTime);\r\n        this.envelope.triggerAttackPortion(audioContext.currentTime);\r\n    }\r\n}\r\n\r\nexport default Synth","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport styled from \"styled-components\";\r\n\r\n// https://medium.com/bleeding-edge/enforcing-an-aspect-ratio-on-an-html-element-in-react-and-css-27a13241c3d4\r\n\r\nconst BorderlessIFrameWrapper = styled.div`\r\n    width: 100%;\r\n    height: 0;\r\n    padding-bottom: 56.25%;\r\n    position: relative;\r\n`\r\nconst BorderlessIFrame = styled.iframe`\r\n    border: none;\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n`\r\n\r\n// ------------------------------------------------------\r\n\r\nconst VideoHeader = styled.h2`\r\n    color: white;\r\n    margin: 0;\r\n    font-family: \"Heebo\";\r\n    font-weight: 100;\r\n`\r\n\r\nconst VideoColumnWrapper = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: left;\r\n    justify-content: center;\r\n    gap: 24px;\r\n    width: 100%;\r\n    background-color: black;\r\n`\r\n\r\ninterface EmbeddedVideoProps\r\n{\r\n    header: string,\r\n    embedURL: string,\r\n}\r\n\r\nconst EmbeddedVideo = (props: EmbeddedVideoProps) => (\r\n    <VideoColumnWrapper>\r\n        <VideoHeader>{props.header}</VideoHeader>\r\n        <BorderlessIFrameWrapper>\r\n            <BorderlessIFrame\r\n                src={props.embedURL}\r\n                allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n                allowFullScreen\r\n                title=\"Embedded youtube\"\r\n            />\r\n        </BorderlessIFrameWrapper>\r\n    </VideoColumnWrapper>\r\n);\r\n\r\nexport default EmbeddedVideo;","import * as React from \"react\"\r\nimport type { HeadFC, PageProps } from \"gatsby\"\r\nimport styled from \"styled-components\"\r\nimport Logo from \"../components/LogoComponent\"\r\nimport BulletText from \"../components/BulletText\"\r\nimport CanvasWrapper from \"../components/CanvasWrapper\"\r\nimport Synth from \"../audio/Synth\"\r\nimport EmbeddedVideo from \"../components/EmbeddedVideo\"\r\n\r\nvar audioContext: AudioContext = new AudioContext();\r\nvar demoSynth: Synth = new Synth(512, 200.0, 3);\r\n\r\n//window.addEventListener('load', init, false);\r\n\r\nfunction init()\r\n{\r\n    try\r\n    {\r\n        // Fix up for prefixing\r\n        window.AudioContext = window.AudioContext || window.webkitAudioContext;\r\n        audioContext = new AudioContext();\r\n    }\r\n    catch (e)\r\n    {\r\n        alert('Web Audio API is not supported in this browser');\r\n    }\r\n}\r\n\r\n//https://developers.google.com/web/updates/2017/09/autoplay-policy-changes#webaudio\r\nfunction resumeAudio()\r\n{\r\n    console.log(audioContext);\r\n    if (audioContext && audioContext.state != \"running\")\r\n    {\r\n        audioContext.resume().then(() =>\r\n        {\r\n            //demoSynth = new Synth(context, 512, 200.0, 3);\r\n            console.log('Playback resumed successfully');\r\n            demoSynth.initOscs(audioContext);\r\n        });\r\n    }\r\n    // Test playing a sound\r\n    // demoSynth.play(1.0, audioContext);\r\n}\r\n\r\nconst DESKTOP_BREAKPOINT: string = \"1280px\";\r\n\r\nconst Header = styled.h1`\r\n    text-align: left;\r\n    width: 100%;\r\n    color: white;\r\n    margin: 0;\r\n    font-family: \"Josefin Sans\";\r\n    font-weight: 100;\r\n`\r\n\r\nconst HeaderWrapper = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n    min-height: 100vh;\r\n    padding: 32px;\r\n    gap: 80px;\r\n    background-color: black;\r\n    @media (min-width: ${DESKTOP_BREAKPOINT}){\r\n        justify-content: flex-start;\r\n        gap: 200px;\r\n    }\r\n`\r\n\r\nconst VideoRowWrapper = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n    gap: 32px;\r\n    width: 100%;\r\n    background-color: black;\r\n    color: white;\r\n    @media (min-width: ${DESKTOP_BREAKPOINT}){\r\n        flex-direction: row;\r\n        gap: 0;\r\n    }\r\n`\r\n\r\nconst IndexPage: React.FC<PageProps> = () =>\r\n{\r\n    //const ReactAudioContext = React.createContext(audioContext);\r\n    return (\r\n        <main>\r\n            <HeaderWrapper>\r\n                <Header>softsound</Header>\r\n                <VideoRowWrapper>\r\n                    {/*1920x1080*/}\r\n                    <EmbeddedVideo header=\"Sound Design\" embedURL=\"https://player.vimeo.com/video/802257789?h=d8e5179c5b&amp;badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479\" />\r\n                    <EmbeddedVideo header=\"Technical Implementation\" embedURL=\"https://player.vimeo.com/video/802257866?h=fddec7f716&amp;badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479\" />\r\n                    <EmbeddedVideo header=\"Audio Programming\" embedURL=\"https://player.vimeo.com/video/802257945?h=3e9481b528&amp;badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479\" />\r\n                </VideoRowWrapper>\r\n            </HeaderWrapper>\r\n        </main>\r\n    )\r\n}\r\n\r\nexport default IndexPage\r\n\r\nexport const Head: HeadFC = () => <title>Home Page</title>\r\n"],"names":["EnvType","EnvState","Env","envType","adsr","sustainProportion","ONE_SHOT","envState","COMPLETE","attackTime","decayTime","sustainTime","releaseTime","releaseTriggerTime","envStartTime","shouldRelease","shouldStopLooping","onBeginAttack","onBeginSustain","onBeginRelease","onEnvComplete","onEnvStopped","onEnvReset","this","attack","decay","sustain","release","reset","getAttackDecayTime","getAttackDecaySustainTime","hasAttackDecayComplete","currentTime","hasAttackDecaySustainComplete","hasEnvComplete","setState","state","time","ATTACK","DECAY","SUSTAIN","RELEASE","triggerAttackPortion","triggerReleasePortion","updateEnv","audioContext","INFINITE","LOOPING","silence","Synth","windowSize","freq","numOscs","harmonicsMultiplier","oscs","Array","oscGainNodes","envGainNodes","isPlaying","currentVelocity","centreFrequency","envelope","console","log","oscIndex","g","gain","cancelScheduledValues","setValueAtTime","exponentialRampToValueAtTime","attackEndTime","value","initOscs","push","createOscillator","createGain","osc","oscGain","envGain","type","frequency","connect","destination","start","play","velocity","BorderlessIFrameWrapper","styled","BorderlessIFrame","VideoHeader","VideoColumnWrapper","props","React","header","src","embedURL","allow","allowFullScreen","title","AudioContext","DESKTOP_BREAKPOINT","Header","displayName","componentId","HeaderWrapper","VideoRowWrapper","EmbeddedVideo","Head"],"sourceRoot":""}